/*! @flowjs/flow.js 2.14.1 */
var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=function(e){return e&&e.Math==Math&&e},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")(),i=function(e){try{return!!e()}catch(e){return!0}},s=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),o={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,u={f:a&&!o.call({1:2},1)?function(e){var t=a(this,e);return!!t&&t.enumerable}:o},l=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},f={}.toString,c=function(e){return f.call(e).slice(8,-1)},h="".split,p=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==c(e)?h.call(e,""):Object(e)}:Object,d=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},v=function(e){return p(d(e))},g=function(e){return"object"==typeof e?null!==e:"function"==typeof e},y=function(e,t){if(!g(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!g(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},b={}.hasOwnProperty,m=function(e,t){return b.call(e,t)},w=r.document,S=g(w)&&g(w.createElement),k=function(e){return S?w.createElement(e):{}},O=!s&&!i((function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a})),x=Object.getOwnPropertyDescriptor,E={f:s?x:function(e,t){if(e=v(e),t=y(t,!0),O)try{return x(e,t)}catch(e){}if(m(e,t))return l(!u.f.call(e,t),e[t])}},j=function(e){if(!g(e))throw TypeError(String(e)+" is not an object");return e},I=Object.defineProperty,C={f:s?I:function(e,t,n){if(j(e),t=y(t,!0),j(n),O)try{return I(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},A=s?function(e,t,n){return C.f(e,t,l(1,n))}:function(e,t,n){return e[t]=n,e},P=function(e,t){try{A(r,e,t)}catch(n){r[e]=t}return t},_=r["__core-js_shared__"]||P("__core-js_shared__",{}),R=Function.toString;"function"!=typeof _.inspectSource&&(_.inspectSource=function(e){return R.call(e)});var T,N,F,z=_.inspectSource,U=r.WeakMap,M="function"==typeof U&&/native code/.test(z(U)),D=t((function(e){(e.exports=function(e,t){return _[e]||(_[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),L=0,B=Math.random(),q=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++L+B).toString(36)},$=D("keys"),G=function(e){return $[e]||($[e]=q(e))},H={},X=r.WeakMap;if(M){var V=new X,Y=V.get,K=V.has,W=V.set;T=function(e,t){return W.call(V,e,t),t},N=function(e){return Y.call(V,e)||{}},F=function(e){return K.call(V,e)}}else{var Z=G("state");H[Z]=!0,T=function(e,t){return A(e,Z,t),t},N=function(e){return m(e,Z)?e[Z]:{}},F=function(e){return m(e,Z)}}var J,Q,ee={set:T,get:N,has:F,enforce:function(e){return F(e)?N(e):T(e,{})},getterFor:function(e){return function(t){var n;if(!g(t)||(n=N(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},te=t((function(e){var t=ee.get,n=ee.enforce,i=String(String).split("String");(e.exports=function(e,t,s,o){var a=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof s&&("string"!=typeof t||m(s,"name")||A(s,"name",t),n(s).source=i.join("string"==typeof t?t:"")),e!==r?(a?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=s:A(e,t,s)):u?e[t]=s:P(t,s)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||z(this)}))})),ne=r,re=function(e){return"function"==typeof e?e:void 0},ie=function(e,t){return arguments.length<2?re(ne[e])||re(r[e]):ne[e]&&ne[e][t]||r[e]&&r[e][t]},se=Math.ceil,oe=Math.floor,ae=function(e){return isNaN(e=+e)?0:(e>0?oe:se)(e)},ue=Math.min,le=function(e){return e>0?ue(ae(e),9007199254740991):0},fe=Math.max,ce=Math.min,he=function(e,t){var n=ae(e);return n<0?fe(n+t,0):ce(n,t)},pe=function(e){return function(t,n,r){var i,s=v(t),o=le(s.length),a=he(r,o);if(e&&n!=n){for(;o>a;)if((i=s[a++])!=i)return!0}else for(;o>a;a++)if((e||a in s)&&s[a]===n)return e||a||0;return!e&&-1}},de={includes:pe(!0),indexOf:pe(!1)},ve=de.indexOf,ge=function(e,t){var n,r=v(e),i=0,s=[];for(n in r)!m(H,n)&&m(r,n)&&s.push(n);for(;t.length>i;)m(r,n=t[i++])&&(~ve(s,n)||s.push(n));return s},ye=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],be=ye.concat("length","prototype"),me={f:Object.getOwnPropertyNames||function(e){return ge(e,be)}},we={f:Object.getOwnPropertySymbols},Se=ie("Reflect","ownKeys")||function(e){var t=me.f(j(e)),n=we.f;return n?t.concat(n(e)):t},ke=function(e,t){for(var n=Se(t),r=C.f,i=E.f,s=0;s<n.length;s++){var o=n[s];m(e,o)||r(e,o,i(t,o))}},Oe=/#|\.prototype\./,xe=function(e,t){var n=je[Ee(e)];return n==Ce||n!=Ie&&("function"==typeof t?i(t):!!t)},Ee=xe.normalize=function(e){return String(e).replace(Oe,".").toLowerCase()},je=xe.data={},Ie=xe.NATIVE="N",Ce=xe.POLYFILL="P",Ae=xe,Pe=E.f,_e=function(e,t){var n,i,s,o,a,u=e.target,l=e.global,f=e.stat;if(n=l?r:f?r[u]||P(u,{}):(r[u]||{}).prototype)for(i in t){if(o=t[i],s=e.noTargetGet?(a=Pe(n,i))&&a.value:n[i],!Ae(l?i:u+(f?".":"#")+i,e.forced)&&void 0!==s){if(typeof o==typeof s)continue;ke(o,s)}(e.sham||s&&s.sham)&&A(o,"sham",!0),te(n,i,o,e)}},Re=Array.isArray||function(e){return"Array"==c(e)},Te=function(e,t,n){var r=y(t);r in e?C.f(e,r,l(0,n)):e[r]=n},Ne=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Fe=Ne&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ze=D("wks"),Ue=r.Symbol,Me=Fe?Ue:Ue&&Ue.withoutSetter||q,De=function(e){return m(ze,e)||(Ne&&m(Ue,e)?ze[e]=Ue[e]:ze[e]=Me("Symbol."+e)),ze[e]},Le=ie("navigator","userAgent")||"",Be=r.process,qe=Be&&Be.versions,$e=qe&&qe.v8;$e?Q=(J=$e.split("."))[0]+J[1]:Le&&(!(J=Le.match(/Edge\/(\d+)/))||J[1]>=74)&&(J=Le.match(/Chrome\/(\d+)/))&&(Q=J[1]);var Ge=Q&&+Q,He=De("species"),Xe=function(e){return Ge>=51||!i((function(){var t=[];return(t.constructor={})[He]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ve=Object.defineProperty,Ye={},Ke=function(e){throw e},We=function(e,t){if(m(Ye,e))return Ye[e];t||(t={});var n=[][e],r=!!m(t,"ACCESSORS")&&t.ACCESSORS,o=m(t,0)?t[0]:Ke,a=m(t,1)?t[1]:void 0;return Ye[e]=!!n&&!i((function(){if(r&&!s)return!0;var e={length:-1};r?Ve(e,1,{enumerable:!0,get:Ke}):e[1]=1,n.call(e,o,a)}))},Ze=Xe("slice"),Je=We("slice",{ACCESSORS:!0,0:0,1:2}),Qe=De("species"),et=[].slice,tt=Math.max;_e({target:"Array",proto:!0,forced:!Ze||!Je},{slice:function(e,t){var n,r,i,s=v(this),o=le(s.length),a=he(e,o),u=he(void 0===t?o:t,o);if(Re(s)&&("function"!=typeof(n=s.constructor)||n!==Array&&!Re(n.prototype)?g(n)&&null===(n=n[Qe])&&(n=void 0):n=void 0,n===Array||void 0===n))return et.call(s,a,u);for(r=new(void 0===n?Array:n)(tt(u-a,0)),i=0;a<u;a++,i++)a in s&&Te(r,i,s[a]);return r.length=i,r}});var nt=function(e){return Object(d(e))},rt=De("species"),it=function(e,t){var n;return Re(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Re(n.prototype)?g(n)&&null===(n=n[rt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},st=Xe("splice"),ot=We("splice",{ACCESSORS:!0,0:0,1:2}),at=Math.max,ut=Math.min;_e({target:"Array",proto:!0,forced:!st||!ot},{splice:function(e,t){var n,r,i,s,o,a,u=nt(this),l=le(u.length),f=he(e,l),c=arguments.length;if(0===c?n=r=0:1===c?(n=0,r=l-f):(n=c-2,r=ut(at(ae(t),0),l-f)),l+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=it(u,r),s=0;s<r;s++)(o=f+s)in u&&Te(i,s,u[o]);if(i.length=r,n<r){for(s=f;s<l-r;s++)a=s+n,(o=s+r)in u?u[a]=u[o]:delete u[a];for(s=l;s>l-r+n;s--)delete u[s-1]}else if(n>r)for(s=l-r;s>f;s--)a=s+n-1,(o=s+r-1)in u?u[a]=u[o]:delete u[a];for(s=0;s<n;s++)u[s+f]=arguments[s+2];return u.length=l-r+n,i}});var lt=C.f,ft=Function.prototype,ct=ft.toString,ht=/^\s*function ([^ (]*)/;s&&!("name"in ft)&&lt(ft,"name",{configurable:!0,get:function(){try{return ct.call(this).match(ht)[1]}catch(e){return""}}});var pt,dt=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return j(n),function(e){if(!g(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),vt=function(e,t,n){var r,i;return dt&&"function"==typeof(r=t.constructor)&&r!==n&&g(i=r.prototype)&&i!==n.prototype&&dt(e,i),e},gt=Object.keys||function(e){return ge(e,ye)},yt=s?Object.defineProperties:function(e,t){j(e);for(var n,r=gt(t),i=r.length,s=0;i>s;)C.f(e,n=r[s++],t[n]);return e},bt=ie("document","documentElement"),mt=G("IE_PROTO"),wt=function(){},St=function(e){return"<script>"+e+"<\/script>"},kt=function(){try{pt=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;kt=pt?function(e){e.write(St("")),e.close();var t=e.parentWindow.Object;return e=null,t}(pt):((t=k("iframe")).style.display="none",bt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(St("document.F=Object")),e.close(),e.F);for(var n=ye.length;n--;)delete kt.prototype[ye[n]];return kt()};H[mt]=!0;var Ot=Object.create||function(e,t){var n;return null!==e?(wt.prototype=j(e),n=new wt,wt.prototype=null,n[mt]=e):n=kt(),void 0===t?n:yt(n,t)},xt="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Et=RegExp("^"+xt+xt+"*"),jt=RegExp(xt+xt+"*$"),It=function(e){return function(t){var n=String(d(t));return 1&e&&(n=n.replace(Et,"")),2&e&&(n=n.replace(jt,"")),n}},Ct={start:It(1),end:It(2),trim:It(3)},At=me.f,Pt=E.f,_t=C.f,Rt=Ct.trim,Tt=r.Number,Nt=Tt.prototype,Ft="Number"==c(Ot(Nt)),zt=function(e){var t,n,r,i,s,o,a,u,l=y(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=Rt(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=(s=l.slice(2)).length,a=0;a<o;a++)if((u=s.charCodeAt(a))<48||u>i)return NaN;return parseInt(s,r)}return+l};if(Ae("Number",!Tt(" 0o1")||!Tt("0b1")||Tt("+0x1"))){for(var Ut,Mt=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Mt&&(Ft?i((function(){Nt.valueOf.call(n)})):"Number"!=c(n))?vt(new Tt(zt(t)),n,Mt):zt(t)},Dt=s?At(Tt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Lt=0;Dt.length>Lt;Lt++)m(Tt,Ut=Dt[Lt])&&!m(Mt,Ut)&&_t(Mt,Ut,Pt(Tt,Ut));Mt.prototype=Nt,Nt.constructor=Mt,te(r,"Number",Mt)}var Bt=function(){var e=j(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function qt(e,t){return RegExp(e,t)}var $t,Gt,Ht={UNSUPPORTED_Y:i((function(){var e=qt("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:i((function(){var e=qt("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},Xt=RegExp.prototype.exec,Vt=String.prototype.replace,Yt=Xt,Kt=($t=/a/,Gt=/b*/g,Xt.call($t,"a"),Xt.call(Gt,"a"),0!==$t.lastIndex||0!==Gt.lastIndex),Wt=Ht.UNSUPPORTED_Y||Ht.BROKEN_CARET,Zt=void 0!==/()??/.exec("")[1];(Kt||Zt||Wt)&&(Yt=function(e){var t,n,r,i,s=this,o=Wt&&s.sticky,a=Bt.call(s),u=s.source,l=0,f=e;return o&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),f=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(u="(?: "+u+")",f=" "+f,l++),n=new RegExp("^(?:"+u+")",a)),Zt&&(n=new RegExp("^"+u+"$(?!\\s)",a)),Kt&&(t=s.lastIndex),r=Xt.call(o?n:s,f),o?r?(r.input=r.input.slice(l),r[0]=r[0].slice(l),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:Kt&&r&&(s.lastIndex=s.global?r.index+r[0].length:t),Zt&&r&&r.length>1&&Vt.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Jt=Yt;_e({target:"RegExp",proto:!0,forced:/./.exec!==Jt},{exec:Jt});var Qt=De("species"),en=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),tn="$0"==="a".replace(/./,"$0"),nn=De("replace"),rn=!!/./[nn]&&""===/./[nn]("a","$0"),sn=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),on=function(e,t,n,r){var s=De(e),o=!i((function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})),a=o&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Qt]=function(){return n},n.flags="",n[s]=/./[s]),n.exec=function(){return t=!0,null},n[s](""),!t}));if(!o||!a||"replace"===e&&(!en||!tn||rn)||"split"===e&&!sn){var u=/./[s],l=n(s,""[e],(function(e,t,n,r,i){return t.exec===Jt?o&&!i?{done:!0,value:u.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:tn,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:rn}),f=l[0],c=l[1];te(String.prototype,e,f),te(RegExp.prototype,s,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}r&&A(RegExp.prototype[s],"sham",!0)},an=function(e){return function(t,n){var r,i,s=String(d(t)),o=ae(n),a=s.length;return o<0||o>=a?e?"":void 0:(r=s.charCodeAt(o))<55296||r>56319||o+1===a||(i=s.charCodeAt(o+1))<56320||i>57343?e?s.charAt(o):r:e?s.slice(o,o+2):i-56320+(r-55296<<10)+65536}},un={codeAt:an(!1),charAt:an(!0)}.charAt,ln=function(e,t,n){return t+(n?un(e,t).length:1)},fn=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==c(e))throw TypeError("RegExp#exec called on incompatible receiver");return Jt.call(e,t)},cn=Math.max,hn=Math.min,pn=Math.floor,dn=/\$([$&'`]|\d\d?|<[^>]*>)/g,vn=/\$([$&'`]|\d\d?)/g;function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t,n){return t&&yn(e.prototype,t),n&&yn(e,n),e}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}on("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,s=r.REPLACE_KEEPS_$0,o=i?"$":"$0";return[function(n,r){var i=d(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&s||"string"==typeof r&&-1===r.indexOf(o)){var u=n(t,e,this,r);if(u.done)return u.value}var l=j(e),f=String(this),c="function"==typeof r;c||(r=String(r));var h=l.global;if(h){var p=l.unicode;l.lastIndex=0}for(var d=[];;){var v=fn(l,f);if(null===v)break;if(d.push(v),!h)break;""===String(v[0])&&(l.lastIndex=ln(f,le(l.lastIndex),p))}for(var g,y="",b=0,m=0;m<d.length;m++){v=d[m];for(var w=String(v[0]),S=cn(hn(ae(v.index),f.length),0),k=[],O=1;O<v.length;O++)k.push(void 0===(g=v[O])?g:String(g));var x=v.groups;if(c){var E=[w].concat(k,S,f);void 0!==x&&E.push(x);var I=String(r.apply(void 0,E))}else I=a(w,f,S,k,x,r);S>=b&&(y+=f.slice(b,S)+I,b=S+w.length)}return y+f.slice(b)}];function a(e,n,r,i,s,o){var a=r+e.length,u=i.length,l=vn;return void 0!==s&&(s=nt(s),l=dn),t.call(o,l,(function(t,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":l=s[o.slice(1,-1)];break;default:var f=+o;if(0===f)return t;if(f>u){var c=pn(f/10);return 0===c?t:c<=u?void 0===i[c-1]?o.charAt(1):i[c-1]+o.charAt(1):t}l=i[f-1]}return void 0===l?"":l}))}}));var Sn=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))},kn=Math.min,On=[].lastIndexOf,xn=!!On&&1/[1].lastIndexOf(1,-0)<0,En=Sn("lastIndexOf"),jn=We("indexOf",{ACCESSORS:!0,1:0}),In=xn||!En||!jn?function(e){if(xn)return On.apply(this,arguments)||0;var t=v(this),n=le(t.length),r=n-1;for(arguments.length>1&&(r=kn(r,ae(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:On;_e({target:"Array",proto:!0,forced:In!==[].lastIndexOf},{lastIndexOf:In});var Cn=De("match"),An=De("species"),Pn=function(e,t){var n,r=j(e).constructor;return void 0===r||null==(n=j(r)[An])?t:function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}(n)},_n=[].push,Rn=Math.min,Tn=!i((function(){return!RegExp(4294967295,"y")}));on("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r,i,s=String(d(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[s];if(!g(r=e)||!(void 0!==(i=r[Cn])?i:"RegExp"==c(r)))return t.call(s,e,o);for(var a,u,l,f=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,h+"g");(a=Jt.call(v,s))&&!((u=v.lastIndex)>p&&(f.push(s.slice(p,a.index)),a.length>1&&a.index<s.length&&_n.apply(f,a.slice(1)),l=a[0].length,p=u,f.length>=o));)v.lastIndex===a.index&&v.lastIndex++;return p===s.length?!l&&v.test("")||f.push(""):f.push(s.slice(p)),f.length>o?f.slice(0,o):f}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=d(this),s=null==t?void 0:t[e];return void 0!==s?s.call(t,i,n):r.call(String(i),t,n)},function(e,i){var s=n(r,e,this,i,r!==t);if(s.done)return s.value;var o=j(e),a=String(this),u=Pn(o,RegExp),l=o.unicode,f=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Tn?"y":"g"),c=new u(Tn?o:"^(?:"+o.source+")",f),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===a.length)return null===fn(c,a)?[a]:[];for(var p=0,d=0,v=[];d<a.length;){c.lastIndex=Tn?d:0;var g,y=fn(c,Tn?a:a.slice(d));if(null===y||(g=Rn(le(c.lastIndex+(Tn?0:d)),a.length))===p)d=ln(a,d,l);else{if(v.push(a.slice(p,d)),v.length===h)return v;for(var b=1;b<=y.length-1;b++)if(v.push(y[b]),v.length===h)return v;d=p=g}}return v.push(a.slice(p)),v}]}),!Tn);var Nn=de.indexOf,Fn=[].indexOf,zn=!!Fn&&1/[1].indexOf(1,-0)<0,Un=Sn("indexOf"),Mn=We("indexOf",{ACCESSORS:!0,1:0});_e({target:"Array",proto:!0,forced:zn||!Un||!Mn},{indexOf:function(e){return zn?Fn.apply(this,arguments)||0:Nn(this,e,arguments.length>1?arguments[1]:void 0)}});var Dn=[].join,Ln=p!=Object,Bn=Sn("join",",");function qn(e,t,n,r,i){var s="slice";e.file.slice?s="slice":e.file.mozSlice?s="mozSlice":e.file.webkitSlice&&(s="webkitSlice"),i.readFinished(e.file[s](t,n,r))}function $n(e,t){return"function"==typeof e&&(t=Array.prototype.slice.call(arguments),e=e.apply(null,t.slice(1))),e}function Gn(e,t){setTimeout(e.bind(t),0)}function Hn(e,t){return Xn(arguments,(function(t){t!==e&&Xn(t,(function(t,n){e[n]=t}))})),e}function Xn(e,t,n){var r;if(e)if(void 0!==e.length){for(r=0;r<e.length;r++)if(!1===t.call(n,e[r],r))return}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r))return}_e({target:"Array",proto:!0,forced:Ln||!Bn},{join:function(e){return Dn.call(v(this),void 0===e?",":e)}}),("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).evalOpts=$n;var Vn=function(){function e(t,n,r){gn(this,e),this.flowObj=t,this.fileObj=n,this.offset=r,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.fileObj.chunkSize,this.startByte=this.offset*this.chunkSize,this.filename=null,this.endByte=this.computeEndByte(),this.xhr=null}return bn(e,[{key:"computeEndByte",value:function(){var e=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-e<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(e=this.fileObj.size),e}},{key:"event",value:function(e,t){(t=Array.prototype.slice.call(arguments)).unshift(this),this.fileObj.chunkEvent.apply(this.fileObj,t)}},{key:"progressHandler",value:function(e){e.lengthComputable&&(this.loaded=e.loaded,this.total=e.total),this.event("progress",e)}},{key:"testHandler",value:function(e){var t=this.status(!0);"error"===t?(this.event(t,this.message()),this.flowObj.uploadNextChunk()):"success"===t?(this.tested=!0,this.event(t,this.message()),this.flowObj.uploadNextChunk()):this.fileObj.paused||(this.tested=!0,this.send())}},{key:"doneHandler",value:function(e){var t=this,n=this.status();if("success"===n||"error"===n)delete this.data,this.event(n,this.message()),this.flowObj.uploadNextChunk();else if(!this.fileObj.paused){this.event("retry",this.message()),this.pendingRetry=!0,this.abort(),this.retries++;var r=this.flowObj.opts.chunkRetryInterval;null!==r?setTimeout((function(){return t.send()}),r):this.send()}}},{key:"getParams",value:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObj.size,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}}},{key:"getTarget",value:function(e,t){return 0==t.length?e:(e.indexOf("?")<0?e+="?":e+="&",e+t.join("&"))}},{key:"test",value:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler.bind(this),!1),this.xhr.addEventListener("error",this.testHandler.bind(this),!1);var e=$n(this.flowObj.opts.testMethod,this.fileObj,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t)}},{key:"preprocessFinished",value:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()}},{key:"readFinished",value:function(e){this.readState=2,this.bytes=e,this.send()}},{key:"send",value:function(){var e=this.flowObj.opts.preprocess,t=this.flowObj.opts.readFileFn;if("function"==typeof e)switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void t(this.fileObj,this.startByte,this.endByte,this.fileObj.file.type,this);case 1:return}if(!this.flowObj.opts.testChunks||this.tested){this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler.bind(this),!1),this.xhr.addEventListener("load",this.doneHandler.bind(this),!1),this.xhr.addEventListener("error",this.doneHandler.bind(this),!1);var n=$n(this.flowObj.opts.uploadMethod,this.fileObj,this),r=this.prepareXhrRequest(n,!1,this.flowObj.opts.method,this.bytes),i=this.flowObj.opts.changeRawDataBeforeSend;"function"==typeof i&&(r=i(this,r)),this.xhr.send(r)}else this.test()}},{key:"abort",value:function(){var e=this.xhr;this.xhr=null,e&&e.abort()}},{key:"status",value:function(e){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"}},{key:"message",value:function(){return this.xhr?this.xhr.responseText:""}},{key:"progress",value:function(){if(this.pendingRetry)return 0;var e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0}},{key:"sizeUploaded",value:function(){var e=this.endByte-this.startByte;return"success"!==this.status()&&(e=this.progress()*e),e}},{key:"prepareXhrRequest",value:function(e,t,n,r){var i=$n(this.flowObj.opts.query,this.fileObj,this,t);i=Hn(i||{},this.getParams());var s=$n(this.flowObj.opts.target,this.fileObj,this,t),o=null;if("GET"===e||"octet"===n){var a=[];Xn(i,(function(e,t){a.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))})),s=this.getTarget(s,a),o=r||null}else o=new FormData,Xn(i,(function(e,t){o.append(t,e)})),void 0!==r&&o.append(this.flowObj.opts.fileParameterName,r,this.filename||this.fileObj.file.name);return this.xhr.open(e,s,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,Xn($n(this.flowObj.opts.headers,this.fileObj,this,t),(function(e,t){this.xhr.setRequestHeader(t,e)}),this),o}}]),e}(),Yn=function(){function e(t,n,r){gn(this,e),this.flowObj=t,this.bytes=null,this.file=n,this.name=n.fileName||n.name,this.size=n.size,this.relativePath=n.relativePath||n.webkitRelativePath||this.name,this.uniqueIdentifier=void 0===r?t.generateUniqueIdentifier(n):r,this.chunkSize=0,this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}return bn(e,[{key:"measureSpeed",value:function(){var e=Date.now()-this._lastProgressCallback;if(e){var t=this.flowObj.opts.speedSmoothingFactor,n=this.sizeUploaded();this.currentSpeed=Math.max((n-this._prevUploadedSize)/e*1e3,0),this.averageSpeed=t*this.currentSpeed+(1-t)*this.averageSpeed,this._prevUploadedSize=n}}},{key:"chunkEvent",value:function(e,t,n){switch(t){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,n,e),this.flowObj.fire("error",n,this,e);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,n,e));break;case"retry":this.flowObj.fire("fileRetry",this,e)}}},{key:"pause",value:function(){this.paused=!0,this.abort()}},{key:"resume",value:function(){this.paused=!1,this.flowObj.upload()}},{key:"abort",value:function(e){this.currentSpeed=0,this.averageSpeed=0;var t=this.chunks;e&&(this.chunks=[]),Xn(t,(function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())}),this)}},{key:"cancel",value:function(){this.flowObj.removeFile(this)}},{key:"retry",value:function(){this.bootstrap(),this.flowObj.upload()}},{key:"bootstrap",value:function(){if("function"==typeof this.flowObj.opts.initFileFn){var e=this.flowObj.opts.initFileFn(this);if(e&&"then"in e)return void e.then(this._bootstrap.bind(this))}this._bootstrap()}},{key:"_bootstrap",value:function(){this.abort(!0),this.error=!1,this._prevProgress=0;var e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor;this.chunkSize=$n(this.flowObj.opts.chunkSize,this);for(var t=Math.max(e(this.size/this.chunkSize),1),n=0;n<t;n++)this.chunks.push(new Vn(this.flowObj,this,n))}},{key:"progress",value:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var e=0;Xn(this.chunks,(function(t){e+=t.progress()*(t.endByte-t.startByte)}));var t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.9999?1:t),this._prevProgress}},{key:"isUploading",value:function(){var e=!1;return Xn(this.chunks,(function(t){if("uploading"===t.status())return e=!0,!1})),e}},{key:"isComplete",value:function(){var e=!1;return Xn(this.chunks,(function(t){var n=t.status();if("pending"===n||"uploading"===n||"reading"===n||1===t.preprocessState||1===t.readState)return e=!0,!1})),!e}},{key:"sizeUploaded",value:function(){var e=0;return Xn(this.chunks,(function(t){e+=t.sizeUploaded()})),e}},{key:"timeRemaining",value:function(){if(this.paused||this.error)return 0;var e=this.size-this.sizeUploaded();return e&&!this.averageSpeed?Number.POSITIVE_INFINITY:e||this.averageSpeed?Math.floor(e/this.averageSpeed):0}},{key:"getType",value:function(){return this.file.type&&this.file.type.split("/")[1]}},{key:"getExtension",value:function(){return this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}}]),e}();("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}).FlowFile=Yn;var Kn=function(){function e(t){gn(this,e),e.version="2.14.1",this.supportDirectory=/Chrome/.test(window.navigator.userAgent)||/Firefox/.test(window.navigator.userAgent)||/Edge/.test(window.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,changeRawDataBeforeSend:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,413,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:qn},this.opts={},this.events={},this.opts=Hn({},this.defaults,t||{}),this._onDropBound=null}return bn(e,[{key:"onDrop",value:function(e){this.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault();var t=e.dataTransfer;t.items&&t.items[0]&&t.items[0].webkitGetAsEntry?this.webkitReadDataTransfer(e):this.addFiles(t.files,e)}},{key:"preventEvent",value:function(e){e.preventDefault()}},{key:"on",value:function(e,t){e=e.toLowerCase(),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){var n,r,i;void 0!==e?(e=e.toLowerCase(),void 0!==t?this.events.hasOwnProperty(e)&&(n=this.events[e],r=t,(i=n.indexOf(r))>-1&&n.splice(i,1)):delete this.events[e]):this.events={}}},{key:"fire",value:function(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();var n=!1;return this.events.hasOwnProperty(e)&&Xn(this.events[e],(function(e){n=!1===e.apply(this,t.slice(1))||n}),this),"catchall"!=e&&(t.unshift("catchAll"),n=!1===this.fire.apply(this,t)||n),!n}},{key:"webkitReadDataTransfer",value:function(e){var t,n=this,r=e.dataTransfer.items.length,i=function(){0==--r&&n.addFiles(s,e)},s=[],o=wn(e.dataTransfer.items);try{for(o.s();!(t=o.n()).done;){var a=t.value,u=a.webkitGetAsEntry();if(!u)return void i();u.isFile?f(a.getAsFile(),u.fullPath):l(u.createReader())}}catch(e){o.e(e)}finally{o.f()}function l(e){e.readEntries((function(t){if(t.length){r+=t.length;var n,s=wn(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;if(o.isFile){var a=o.fullPath;o.file((function(e){return f(e,a)}),c)}else o.isDirectory&&l(o.createReader())}}catch(e){s.e(e)}finally{s.f()}l(e)}else i()}),c)}function f(e,t){e.relativePath=t.substring(1),s.push(e),i()}function c(e){throw i(),e}}},{key:"generateUniqueIdentifier",value:function(e){var t=this.opts.generateUniqueIdentifier;if("function"==typeof t)return t(e);var n=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")}},{key:"uploadNextChunk",value:function(e){var t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(Xn(this.files,(function(e){return!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0})),t))return t;if(Xn(this.files,(function(e){if(e.paused||Xn(e.chunks,(function(e){if("pending"===e.status())return e.send(),t=!0,!1})),t)return!1})),t)return!0;var n=!1;return Xn(this.files,(function(e){if(!e.isComplete())return n=!0,!1})),n||e||Gn((function(){this.fire("complete")}),this),!1}},{key:"assignBrowse",value:function(e,t,n,r){e instanceof Element&&(e=[e]),Xn(e,(function(e){var i,s=this;"INPUT"===e.tagName&&"file"===e.type?i=e:((i=document.createElement("input")).setAttribute("type","file"),Hn(i.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),e.appendChild(i),e.addEventListener("click",(function(){i.click()}),!1)),this.opts.singleFile||n||i.setAttribute("multiple","multiple"),t&&i.setAttribute("webkitdirectory","webkitdirectory"),Xn(r,(function(e,t){i.setAttribute(t,e)})),i.addEventListener("change",(function(e){e.target.value&&(s.addFiles(e.target.files,e),e.target.value="")}),!1)}),this)}},{key:"assignDrop",value:function(e){void 0===e.length&&(e=[e]),this._onDropBound=this.onDrop.bind(this);var t,n=wn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.addEventListener("dragover",this.preventEvent,!1),r.addEventListener("dragenter",this.preventEvent,!1),r.addEventListener("drop",this._onDropBound,!1)}}catch(e){n.e(e)}finally{n.f()}}},{key:"unAssignDrop",value:function(e){void 0===e.length&&(e=[e]);var t,n=wn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.removeEventListener("dragover",this.preventEvent,!1),r.removeEventListener("dragenter",this.preventEvent,!1),r.removeEventListener("drop",this._onDropBound,!1)}}catch(e){n.e(e)}finally{n.f()}}},{key:"isUploading",value:function(){var e=!1;return Xn(this.files,(function(t){if(t.isUploading())return e=!0,!1})),e}},{key:"_shouldUploadNext",value:function(){var e=0,t=!0,n=this.opts.simultaneousUploads;return Xn(this.files,(function(r){Xn(r.chunks,(function(r){if("uploading"===r.status()&&++e>=n)return t=!1,!1}))})),t&&e}},{key:"upload",value:function(){var e=this._shouldUploadNext();if(!1!==e){this.fire("uploadStart");for(var t=!1,n=1;n<=this.opts.simultaneousUploads-e;n++)t=this.uploadNextChunk(!0)||t;t||Gn((function(){this.fire("complete")}),this)}}},{key:"resume",value:function(){Xn(this.files,(function(e){e.isComplete()||e.resume()}))}},{key:"pause",value:function(){Xn(this.files,(function(e){e.pause()}))}},{key:"cancel",value:function(){for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel()}},{key:"progress",value:function(){var e=0,t=0;return Xn(this.files,(function(n){e+=n.progress()*n.size,t+=n.size})),t>0?e/t:0}},{key:"addFile",value:function(e,t){this.addFiles([e],t)}},{key:"addFiles",value:function(e,t){var n=[],r=window.navigator.msPointerEnabled;Xn(e,(function(e){if((!r||r&&e.size>0)&&(e.size%4096!=0||"."!==e.name&&"."!==e.fileName)){var i=this.generateUniqueIdentifier(e);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(i)){var s=new Yn(this,e,i);this.fire("fileAdded",s,t)&&n.push(s)}}}),this),this.fire("filesAdded",n,t)&&(Xn(n,(function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)}),this),this.fire("filesSubmitted",n,t))}},{key:"removeFile",value:function(e){for(var t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort(),this.fire("fileRemoved",e))}},{key:"getFromUniqueIdentifier",value:function(e){var t=!1;return Xn(this.files,(function(n){n.uniqueIdentifier===e&&(t=n)})),t}},{key:"getSize",value:function(){var e=0;return Xn(this.files,(function(t){e+=t.size})),e}},{key:"sizeUploaded",value:function(){var e=0;return Xn(this.files,(function(t){e+=t.sizeUploaded()})),e}},{key:"timeRemaining",value:function(){var e=0,t=0;return Xn(this.files,(function(n){n.paused||n.error||(e+=n.size-n.sizeUploaded(),t+=n.averageSpeed)})),e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}}]),e}();export default Kn;
//# sourceMappingURL=flow.min.js.map
